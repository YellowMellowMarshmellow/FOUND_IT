<h1>Matches</h1>

<% @matches.each do |match| %>
  <% markers = [{
    lat: match.found_item.latitude,
    lng: match.found_item.longitude
  }] %>

  <p>
    Lost: <%= match.lost_item.title %><br>
    Found: <%= match.found_item.title %>
  </p>

  <div style="width: 100%; height: 600px;"
    data-controller="map"
    data-map-markers-value="<%= raw markers.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>

  <%= button_to "Confirm the match", match_path(match), method: :patch, data: { turbo_confirm: "Confirm this match ?" } %>
<% end %>
