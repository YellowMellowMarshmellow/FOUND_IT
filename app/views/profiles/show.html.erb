<div class="custom-wrapper mt-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 style="font-weight: bold"><strong>Hi, <%= @user.first_name %>!</strong></h2>
  </div>

  <div class="row mt-5 align-items-start justify-content-center">
    <div class="col-md-4 text-center">
      <div style="position: relative; display: inline-block; cursor: pointer; margin-left: -7rem;">
        <%= link_to edit_profiles_path do %>
          <%= image_tag @user.display_avatar,
                        class: 'rounded-circle border',
                        style: 'width: 170px; height: 170px; object-fit: cover;' %>
          <span style="position: absolute; bottom: 5px; right: 5px; background: #F5B221; border-radius: 50%;
                      padding: 6px; color: white; font-size: 14px; width: 33px; height: 33px;">
            <i class="bi bi-pencil"></i>
          </span>
        <% end %>
      </div>
      <div class="border border-secondary-subtle border-1 p-3 mt-5" style="height: 19.5rem; border-radius: 16px;">
        <p style="font-size: 18px;">Good Deeds Level</p>
        <hr class="my-4" style="border: none; height: 2px; background-color: black;">
        <div style="font-size: 5rem;">üèÖ</div>
        <strong style="font-size: 1.5rem;"><%= @level %></strong>
      </div>
    </div>

    <div class="col-md-4">
      <!-- User Info Section Part 1 -->
      <div class="row mt-4">
        <div class="col-12">
            <h5 class="mb-4"><strong>Profile Information</strong></h5>
            <div class="row flex-grow-1 mb-5">
              <div class="col-md-6">
                <p><strong>Name:</strong> <%= @user.full_name %></p>
                <p><strong>Email:</strong> <%= @user.email %></p>
              </div>
            </div>
        </div>
      </div>
      <div class="border border-secondary-subtle border-1 p-3 mb-3 text-center mt-3" style="border-radius: 16px;">
        <p class="fs-3"><strong><%= @good_deeds_count %></strong></p>
        <p style="font-size: 18px;">Good Deeds</p>
      </div>
      <div class="border border-secondary-subtle border-1 p-3 text-center" style="border-radius: 16px;">
        <p class="fs-3"><strong><%= @reports_to_next_level %></strong></p>
        <p style="font-size: 18px;">Found Reports<br>away to the next level</p>
      </div>
    </div>

    <div class="col-md-4">
      <!-- User Info Section Part 2 -->
      <div class="col-12">
        <div class="row mt-5">
          <div class="row flex-grow-1 mt-4 mb-5">
            <div class="col-md-6">
              <p><strong>Member since:</strong> <%= @user.created_at.strftime("%B %Y") %></p>
            </div>
          </div>
        </div>
      </div>
      <h5 class="mt-5"><strong>Thank-you Notes:</strong></h5>
      <div class="row">
        <% if @thank_you_notes.any? %>
          <% @thank_you_notes.each do |note| %>
            <div class="col-md-6 border rounded p-3 m-2">
              <small><%= note.created_at.strftime("%d.%m.%Y") %></small>
              <p><%= note.message %></p>
            </div>
          <% end %>
        <% else %>
          <div class="col-12">
            <p class="text-muted">No thank you notes yet. Start helping others to receive notes!</p>
          </div>
        <% end %>
      </div>
      <% if @thank_you_notes.any? %>
        <%= link_to "Read all notes", user_thank_you_notes_path(current_user),
            class: "btn btn-outline-dark border-2 mt-3 py-2 px-3",
            style: "border-radius: 10px; font-weight: bold;" %>
      <% end %>
    </div>
  </div>
  <div class="custom-margin"></div>
</div>
