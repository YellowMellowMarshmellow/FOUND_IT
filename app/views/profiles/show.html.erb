<div class="custom-wrapper my-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 style="font-weight: bold">Welcome back, <%= @user.first_name %>!</h3>
    <div>
      <%= link_to "Edit Profile", edit_profiles_path, class: "btn btn-outline-primary me-2" %>
      <%= link_to "Account Settings", edit_user_registration_path, class: "btn btn-outline-secondary" %>
    </div>
  </div>

  <div class="row mt-4 align-items-start justify-content-center">
    <div class="col-md-3 text-center">
      <div style="position: relative; display: inline-block; cursor: pointer; margin-left: -7rem;">
        <%= link_to edit_profiles_path do %>
          <%= image_tag @user.display_avatar,
                        class: 'rounded-circle border',
                        style: 'width: 170px; height: 170px; object-fit: cover;' %>
          <span style="position: absolute; bottom: 5px; right: 5px; background: #007bff; border-radius: 50%;
                      padding: 6px; color: white; font-size: 14px; width: 33px; height: 33px;">
            <i class="bi bi-pencil"></i>
          </span>
        <% end %>
      </div>
      <div class="border border-secondary-subtle border-1 p-3 mt-5" style="height: 19.5rem; border-radius: 16px;">
        <p style="font-size: 18px;">Good Deeds Level</p>
        <hr class="my-4" style="border: none; height: 2px; background-color: black;">
        <div style="font-size: 5rem;">üèÖ</div>
        <strong style="font-size: 1.5rem;"><%= @level %></strong>
      </div>
    </div>

    <div class="col-md-3" style="margin-top: 13.6rem;">
      <div class="border border-secondary-subtle border-1 p-3 mb-3 text-center" style="border-radius: 16px;">
        <p class="fs-3"><strong><%= @good_deeds_count %></strong></p>
        <p style="font-size: 18px;">Good Deeds</p>
      </div>
      <div class="border border-secondary-subtle border-1 p-3 text-center" style="border-radius: 16px;">
        <p class="fs-3"><strong><%= @reports_to_next_level %></strong></p>
        <p style="font-size: 18px;">Found Reports<br>away to the next level</p>
      </div>
    </div>

    <div class="col-md-6" style="margin-top: 13.6rem;">
      <h5><strong>Thank-you Notes:</strong></h5>
      <div class="row">
        <% if @thank_you_notes.any? %>
          <% @thank_you_notes.each do |note| %>
            <div class="col-md-6 border rounded p-3 m-2">
              <small><%= note.created_at.strftime("%d.%m.%Y") %></small>
              <p><%= note.message %></p>
            </div>
          <% end %>
        <% else %>
          <div class="col-12">
            <p class="text-muted">No thank you notes yet. Keep helping others to receive notes!</p>
          </div>
        <% end %>
      </div>
      <% if @thank_you_notes.any? %>
        <%= link_to "Read all notes", user_thank_you_notes_path(current_user),
            class: "btn btn-outline-dark border-2 mt-3 py-2 px-3",
            style: "border-radius: 10px; font-weight: bold;" %>
      <% end %>
    </div>
  </div>

  <!-- User Info Section -->
  <div class="row mt-5">
    <div class="col-12">
      <div class="card p-4">
        <h5><strong>Profile Information</strong></h5>
        <div class="row">
          <div class="col-md-6">
            <p><strong>Name:</strong> <%= @user.full_name %></p>
            <p><strong>Email:</strong> <%= @user.email %></p>
          </div>
          <div class="col-md-6">
            <p><strong>Member since:</strong> <%= @user.created_at.strftime("%B %Y") %></p>
            <p><strong>Lost items reported:</strong> <%= @user.lost_items.count %></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
